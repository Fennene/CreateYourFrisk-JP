<!DOCTYPE html>
<!--
since you're here anyway: there's a small easter egg on the text commands page but it's probably not worth finding, sorry
you may notice this page's code is garbage: i'm not a web designer! ;-;
it's w3c valid, at least
-->

<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="favicon.ico">

    <title>CYF ドキュメント - Player オブジェクト</title>
    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="../css/themesidebar.css" rel="stylesheet">
    <link href="../css/shThemeRDark.css" rel="stylesheet">
</head>
<body>
<img src="../img/bg2.png" alt="Undertale background" class="backimg">
<div class="container arena black">
    <div class="col-md-2">
        <!--navigation-->
        <nav class="nav-sidebar">
            <ul class="nav tabs">
                <li class="li-header">基本</li>
                    <li><a href="../documentation.html">ようこそ</a></li>
                    <li><a href="howtoread.html">このドキュメントの読み方</a></li>
                    <hr style="margin-top:-2.5px;margin-bottom:2.5px;">
                    <li><a href="controls.html">基本操作</a></li>
                    <li><a href="basic.html">基本構成</a></li>
                    <li><a href="unity.html"><span class="CYF"></span> Unity Setup (Optional)</a></li>
                    <li><a href="variables.html">予約変数</a></li>
                    <li><a href="terms.html">用語</a></li>
                <li class="li-header">API</li>
                    <li><a href="api-text.html">テキストコマンド</a></li>
                    <li class="new"><a href="api-events.html">ゲームイベント</a></li>
                    <hr style="margin-top:-2.5px;margin-bottom:2.5px;">
                    <li class="li-indent">関数 &amp; オブジェクト:</li>
                        <li class="li-indent new"><a href="api-functions-main.html">その他の関数</a></li>
                        <li class="li-indent active new" style="margin-left:5px;">&gt; Player オブジェクト &lt;</li>
                        <li class="li-indent"><a href="api-functions-script.html">Script オブジェクト</a></li>
                        <li class="li-indent"><a href="api-functions-audio.html">Audio オブジェクト</a></li>
                        <li class="li-indent"><a href="api-functions-newaudio.html"><span class="CYF"></span> NewAudio オブジェクト</a></li>
                        <li class="li-indent"><a href="api-functions-input.html">Input オブジェクト</a></li>
                        <li class="li-indent"><a href="api-functions-time.html">Time オブジェクト</a></li>
                        <li class="li-indent"><a href="cyf-inventory.html"><span class="CYF"></span> Inventory オブジェクト</a></li>
                        <li class="li-indent new"><a href="api-functions-misc.html"><span class="CYF"></span>Misc オブジェクト</a></li>
                        <li class="li-indent new"><a href="api-functions-discord.html"><span class="CYF"></span> The Discord Object</a></li>
                        <li class="li-indent"><a href="api-functions-waves.html">Arena オブジェクト</a></li>
                    <hr style="margin-top:-2.5px;margin-bottom:2.5px;">
                    <li><a href="api-projectile.html">発射体(Projectile) 制御</a></li>
                    <li><a href="cyf-ppcollision.html"><span class="CYF"></span> The Pixel-Perfect Collision システム</a></li>
                    <li class="new"><a href="api-animation.html">スプライト &amp; アニメーション</a></li>
                    <li class="new"><a href="cyf-text.html"><span class="CYF"></span> Text オブジェクト</a></li>
                    <hr style="margin-top:-2.5px;margin-bottom:2.5px;">
                <li class="li-header"></span><span class="CYF"></span> <span class="new"></span>Shaders</li>
                    <li><a href="shaders.html">Introduction</a></li>
                    <li><a href="shaders-object.html">The Shader Object</a></li>
                    <li><a href="shaders-coding.html">Coding a Shader</a></li>
                    <hr style="margin-top:10px;margin-bottom:10px;">
                <li class="li-header"><span class="CYF"></span> Overworld</li>
                    <li class="new"><a href="overworld.html">Basics</a></li>
                    <li><a href="overworld-howto-map.html">How to create a map</a></li>
                    <li><a href="overworld-howto-event.html">How to create an event</a></li>
                    <li><a href="overworld-howto-animevent.html">How to animate an event</a></li>
                    <li class="new"><a href="overworld-howto-shop.html">How to create a shop</a></li>
                    <hr style="margin-top:-2.5px;margin-bottom:2.5px;">
                    <li class="li-indent"><span class="CYF"></span> Overworld Objects:</li>
                        <li class="li-indent"><a href="overworld-object-general.html">The General Object</a></li>
                        <li class="li-indent"><a href="overworld-object-event.html">The Event Object</a></li>
                        <li class="li-indent"><a href="overworld-object-player.html">The Player Object</a></li>
                        <li class="li-indent"><a href="overworld-object-screen.html">The Screen Object</a></li>
                        <li class="li-indent"><a href="overworld-object-inventory.html">The Inventory Object</a></li>
                        <li class="li-indent new"><a href="overworld-object-map.html">The Map Object</a></li>
                    <hr style="margin-top:-2.5px;margin-bottom:2.5px;">
                <li class="li-header">素材</li>
                    <li><a href="../media/dialogoptions.png">吹き出し一覧</a></li>
                    <li><a href="api-keys.html"><span class="CYF"></span> キーリスト</a></li>
            </ul>
        </nav>
    </div>
    <!--tabs'n'shit-->
    <div class="tab-content col-md-10">
        <div class="tab-pane active text-style" id="api-functions-player">
            <p>
                <br><span class="function">Player オブジェクト [E/M/W]</span>
                この関数を使用して、プレイヤーに関する情報を取得できます。(Undertaleでは)プレイヤーのテクスチャの大きさは16x16ピクセルであるため、
                プレイヤーの座標から 8加減算することで、プレイヤーのスプライトの端の座標を取得できます。
                プレイヤーの座標は、スプライトの中心を表します。
            </p>
            <ul>
                <li><span class="number"></span> <span class="term">Player.x</span> (読み取り専用) - アリーナの中心を基準とした時の、プレイヤーのx座標を表します。
                </li><br>
                <li><span class="number"></span> <span class="term">Player.y</span> (読み取り専用) - アリーナの中心を基準とした時の、プレイヤーのy座標を表します。
                </li><br>
                <li><span class="number"></span> <span class="term">Player.absx</span> (読み取り専用) - 画面左下端を基準とした時の、プレイヤーのx座標を表します。
                </li><br>
                <li><span class="number"></span> <span class="term">Player.absy</span> (読み取り専用) - 画面左下端を基準とした時の、プレイヤーのy座標を表します。
                </li><br>
                <li><span class="userdata">sprite</span> <span class="term">Player.sprite</span> - プレイヤーのタマシイのスプライトオブジェクト。
                    詳細は<span class="ref">スプライト &amp; アニメーション</span>セクションを参照してください。
                </li><br>
                <li><span class="number"></span> <span class="term">Player.hp</span> - プレイヤーのHPを取得及び設定します。最大HPより大きい値にはできません。
                    0に設定すると、ゲームオーバーになります。<br>
                    <span class="CYF"></span> hpに小数を指定することができるようになりましたが、float値の精度に関していくつかの問題が生じる可能性があります。
                </li><br>
                <li><span class="CYF"></span> <span class="number"></span> <span class="term">Player.maxhp</span> - プレイヤーの最大HPを取得します。<br>
                    CYF v0.6.4以降から設定できるようになりました。これを設定するのは
                    <span class="term">Player.SetMaxHPShift(&lt;value&gt;, 0, true, false, false)</span>を呼び出すのと同じです。<br>
                    最大HPはfloat値(小数)ではありません。
                </li><br>
                <li><span class="CYF"></span> <span class="number"></span> <span class="term">Player.maxhpshift</span> (読み取り専用) - プレイヤーの現在の最大HPと
                    本来の最大HP(おそらくUndertale基準の最大HP?[要検証])との差を取得します。
                </li><br>
                <li><span class="CYF"></span> <span class="number"></span> <span class="term">Player.atk</span> - プレイヤーの攻撃力。LVで変動します。
                    <br><br>
                    <span class="term">Player.lv</span>を変更するか戦闘が終了すると、この値が<b>リセット</b>(Undertale基準の値になる)されます。
                </li><br>
                <li><span class="CYF"></span> <span class="string"></span> <span class="term">Player.weapon</span> (読み取り専用) - プレイヤーの装備している武器の名前を取得します。
                </li><br>
                <li><span class="CYF"></span> <span class="number"></span> <span class="term">Player.weaponatk</span> (読み取り専用) - プレイヤーの装備している武器の攻撃力を取得します。
                </li><br>
                <li><span class="CYF"></span> <span class="number"></span> <span class="term">Player.def</span> - プレイヤーの防御力。LVで変動します。
                    <br><br>
                    <span class="term">Player.lv</span>を変更するか戦闘が終了すると、この値が<b>リセット</b>(Undertale基準の値になる)されます。
                </li><br>
                <li><span class="CYF"></span> <span class="string"></span> <span class="term">Player.armor</span> (読み取り専用) - プレイヤーの装備している防具の名前を取得します。
                </li><br>
                <li><span class="CYF"></span> <span class="number"></span> <span class="term">Player.armordef</span> (読み取り専用) - プレイヤーの装備している防具の防御力を取得します。
                </li><br>
                <li><span class="string"></span> <span class="term">Player.name</span> - プレイヤーの現在の名前を取得及び設定をします。<br>
                    <span class="unitale"></span> 最大６文字まで。通常では、戦闘開始時にエンジンが用意した名前からランダムに設定されます。<br>
                    <span class="CYF"></span> 最大９文字まで。デフォルトでは"Rhenao"が設定されています。</li><br>
                <li><span class="number"></span> <span class="term">Player.lv</span> - プレイヤーの現在のLVを取得及び設定をします。値は 1～20(<span class="CYF"></span>99まで)です。 デフォルトでは 1が設定されています。
                LV1で 20HP / 10ATK から始まり、LVが上がるごとに 4HP / 2 ATK 追加されます。
                <br><br>
                プレイヤーのLVを上げても、自動的にHPが回復されることはありません。
                </li><br>
                <li><span class="CYF"></span> <span class="number"></span> <span class="term">Player.lastenemychosen</span> (読み取り専用) - gets the id of the last chosen enemy in the
                ACT/FIGHT menus. -1 at the beginning of a fight.<br>
                NOTE: This is NOT the same as the enemy's position in the <span class="term">enemies</span> table. This is the position of the enemies in the <i>menu</i> in-game.
                </li><br>
                <li><span class="CYF"></span> <span class="number"></span> <span class="term">Player.lasthitmultiplier</span> (読み取り専用) - gets the accuracy value from the last time the
                player was in <span class="term">ATTACKING</span>. Normally, it will be between 0 and 2. It will be -1 if the player missed the attack (and
                at the beginning of the battle) and 2.2 if the attack was perfectly precise.
                </li><br>
                <li><span class="boolean"></span> <span class="term">Player.ishurting</span> (読み取り専用) - プレイヤーがダメージを受けて(いて無敵状態(点滅している状態)になって)いる間はtrue、そうでない場合はfalseを返します。
                </li><br>
                <li><span class="boolean"></span> <span class="term">Player.ismoving</span> (読み取り専用) - プレイヤー(のタマシイ)が動いている場合はtrue、静止している場合はfalseを返します。
                <br>ウェーブスクリプト外ではfalseになります。[要検証](Will always be false while not in a wave script.[原文])
                <br>NOTE: This only will change with the default control scheme (see <span class="term">Player.SetControlOverride</span> below).[翻訳力不足]
                <br>(おそらく、<span class="term">Player.SetControlOverride(true)</span>の場合は機能しないことを表すと思われる。)
                </li><br>
                <li><span class="new"></span><span class="term">Player.Hurt(<span class="number"></span> damage, <span class="number"></span> invul_time = 1.7, <span class="boolean"></span> ignoreDef = false, <span class="boolean"></span> playSound = true)</span>
                - プレイヤーにダメージを与えて、<span class="term">invul_time</span>秒間無敵にします。
                <br>すでにプレイヤーがダメージを受けている状態であれば、再度ダメージを与えることはできません。<strike>私がやった時はそうではなかったんだが...。ゴリゴリ減って一瞬でゲームオーバー。なぜだ。 by 翻訳者</strike>
                <br><br>
                <span class="term">ignoreDef</span>をtrueに指定し、エンカウンタースクリプトの<span class="term">allowPlayerDef</span>変数がtrueの場合、ダメージの計算にプレイヤーの防御力は無視されます。
                <br><br>
                <span class="CYF"></span> <span class="term">Player.Hurt(0, 0)</span>を呼び出して、音を出さずにプレイヤーの無敵状態を解除できます。
                <br><span class="new"></span><span class="term">playSound</span>を<span class="term">false</span>に指定すると、ダメージ音は流れません。
                </li><br>
                <li><span class="term">Player.Heal(<span class="number"></span> value)</span> - 指定した分、プレイヤーのHPを回復させます。
                    これは、Player.Hurt(-value, 0)を指定するのと同じです。回復音も流れます。
                </li><br>
                <li><span class="term">Player.SetControlOverride(<span class="boolean"></span> boolean)</span> - ウェーブのみで使用できます。
                trueの場合、エンジンが用意したプレイヤーの動き(赤色のタマシイの操作)を無効にします。
                <br><br>
                青色のタマシイなど、独自の操作のタマシイを作りたい時に便利です。
                </li><br>
                <li><span class="CYF"></span> <span class="term">Player.Move(<span class="number"></span> x, <span class="number"></span> y, <span class="boolean"></span> ignoreWalls = false)</span> - プレイヤーの最後の位置(現在位置)を基準として、プレイヤーのタマシイを移動させます。
                    <span class="term">ignoreWalls</span>をfalseに指定すると、プレイヤーがアリーナの外に移動するのを防げます。trueの場合は、アリーナを無視します。
                    プレイヤーをアリーナの外に移動させたい場合は、<span class="term">Player.SetControlOverride(true)</span>を呼び出してください。
                    デフォルトの動きでは、プレイヤーをアリーナ内に保持しようとするからです。
                </li><br>
                <li><span class="term">Player.MoveTo(<span class="number"></span> x, <span class="number"></span> y, <span class="boolean"></span> ignoreWalls = false)</span> - アリーナ中心を基準として、プレイヤーのタマシイを移動させます。
                    <span class="term">ignoreWalls</span>をfalseに指定すると、プレイヤーがアリーナの外に移動するのを防げます。trueの場合は、アリーナを無視します。
                    プレイヤーをアリーナの外に移動させたい場合は、<span class="term">Player.SetControlOverride(true)</span>を呼び出してください。
                    デフォルトの動きでは、プレイヤーをアリーナ内に保持しようとするからです。
                </li><br>
                <li><span class="term">Player.MoveToAbs(<span class="number"></span> x, <span class="number"></span> y, <span class="boolean"></span> ignoreWalls = false)</span> - 画面左下端を基準として、プレイヤーのタマシイを移動させます。
                    <span class="term">ignoreWalls</span>をfalseに指定すると、プレイヤーがアリーナの外に移動するのを防げます。trueの場合は、アリーナを無視します。
                    プレイヤーをアリーナの外に移動させたい場合は、<span class="term">Player.SetControlOverride(true)</span>を呼び出してください。
                    デフォルトの動きでは、プレイヤーをアリーナ内に保持しようとするからです。
                </li><br>
                <li><span class="CYF"></span> <span class="term">Player.ForceHP(<span class="number"></span> amount)</span> - プレイヤーのHPを最大HPより高く設定します。最大MaxHPの1.5倍まで設定できます。
                </li><br>
                <li><span class="CYF"></span> <span class="term">Player.SetMaxHPShift(<span class="number"></span> shift, <span class="number"></span> invulnerabilitySeconds = 1.7f, <span class="boolean"></span> set = false,
                <span class="boolean"></span> canHeal = false, <span class="boolean"></span> playSound = true)</span> - 通常の最大HP(Undertale仕様)を基準として、プレイヤーの最大HPを設定します。
                    合計最大HPが０以下の場合、ゲームオーバーになります。<br>
                    式: 最大HP = 基本最大HP + MaxHP Shift
                    <br><br>
                    <ul>
                        <li><span class="term">shift</span> = 基本最大HPに追加する分の値。<span class="term">set</span>をtrueに指定すると、
                            この値が<i>新しい</i>最大HPになります。
                        <li><span class="term">invulnerabilitySeconds</span> = この関数を呼び出した後の無敵時間。(秒数)
                        </li><br>
                        <li><span class="term">set</span> = プレイヤーの最大HPを直接設定したい場合はtrueにする。</li><br>
                        <li><span class="term">canHeal</span> = この関数で追加されたHPの分だけ回復するかどうか。減った場合は特に何も起こりません。</li><br>
                        <li><span class="term">playSound</span> = 回復/ダメージ音を流すかどうか。</li><br>
                    </ul>
                </li><br>
                <li><span class="CYF"></span> <span class="term">Player.ResetStats(<span class="boolean"></span> resetMHP = true, <span class="boolean"></span> resetATK = true, <span class="boolean"></span> resetDEF = false)</span> - プレイヤーの最大HP、攻撃力、防御力をプレイヤーのLVに基づいてリセットします。
                    <br><br>
                    引数を通してリセットするものを決められます:
                    <ul>
                        <li><span class="term">resetMHP</span> = trueの場合、最大HPがLVに基づいた値にリセットされます。</li><br>
                        <li><span class="term">resetATK</span> = trueの場合、攻撃力がLVに基づいた値にリセットされます。</li><br>
                        <li><span class="term">resetDEF</span> = trueの場合、防御力がLVに基づいた値にリセットされます。</li><br>
                    </ul>
                    この関数で設定される値は<a href="https://undertale.fandom.com/wiki/Stats#Stat_Chart">このチャート</a>に基づいて設定されます。
                    <br>日本語版だとチャートが変なので英語版のリンクをそのままにしました。 by 翻訳者
                </li><br>
                <li><span class="CYF"></span> <span class="term">Player.SetAttackAnim(<span class="luatable"><span class="string"></span></span> anim, <span class="number"></span> frequency, <span class="string"></span> prefix = "")</span> - 敵を攻撃する時のアニメーションを設定します。
                <span class="term">sprite.SetAnimation()</span>のように設定できます。</li><br>
                <li><span class="CYF"></span> <span class="term">Player.ResetAttackAnim()</span> - 敵を攻撃する時のアニメーションを元のアニメーションにもどします。
                <li><span class="CYF"></span> <span class="term">Player.ChangeTarget(<span class="number"></span> targetNumber)</span> - Changes the target of the Player's attack
                while in <span class="term">ATTACKING</span>. Does nothing outside of the state <span class="term">ATTACKING</span>.
                    It should be used in <span class="term">BeforeDamageCalculation()</span> or <span class="term">BeforeDamageValues()</span>.</li><br>
                <li><span class="CYF"></span> <span class="term">Player.ForceAttack(<span class="number"></span> enemyID, <span class="number"></span> damage = normal_damage_values)</span> - 敵のID
                    <span class="term">enemyID</span>に向かって強制的に攻撃します。必要に応じて、ダメージを設定できますが、設定しない場合は通常通り計算されます。
                    <br><span style="color:#ff0000">敵がこのコードで死んだかを確認する場合は、<span class="term">Player.CheckDeath</span>を使用して確認する必要があります！</span></li><br>
                <li><span class="CYF"></span> <span class="term">Player.MultiTarget(<span class="luatable"><span class="number"></span></span>  targetIDs = all, <span class="luatable"><span class="number"></span></span> damage = normal_damage_values)</span> - The
                    next attack the player executes will attack the enemies contained in <span class="term">targetIDs</span> and deal <span class="term">
                    damage</span> damage. If you want to, you can choose the attack's damage, too - but otherwise, damage will be calculated normally.
                    If you put nothing as a parameter, this will attack all enemies with the normal damage calculations.</li><br>
                <li><span class="CYF"></span> <span class="term">Player.MultiTarget(<span class="number"></span> damage)</span> - The next attack the player executes will attack all
                enemies and deals <span class="term">damage</span> damage.</li><br>
                <li><span class="CYF"></span> <span class="term">Player.ForceMultiAttack(<span class="luatable"><span class="number"></span></span> targetIDs = all, <span class="luatable"><span class="number"></span></span> = normal_damage_values)</span>
                    - Forces an attack towards the enemies contained in <span class="term">targetIDs</span> and deals <span class="term">damage
                    </span> damage. If you want to, you can choose the attack's damage, too - but otherwise, damage will be calculated normally.
                    If you put nothing as a parameter, this will attack all enemies with the normal damage calculations.
                    <br><span style="color:#ff0000">If you want enemies to be able to die this way, you MUST check with <span class="term">Player.CheckDeath</span>!</span></li><br>
                <li><span class="CYF"></span> <span class="term">Player.ForceMultiAttack(<span class="number"></span> damage)</span> - Forces an attack that deals
                <span class="term">damage</span> damage to all enemies.
                    <br><span style="color:#ff0000">If you want enemies to be able to die this way, you MUST check with <span class="term">Player.CheckDeath</span>!</span></li><br>
                <li><span class="CYF"></span> <span class="term">Player.CheckDeath()</span> - 強制攻撃後に敵が死んだか確認します。
                    I don't kill the enemies from forced attacks because death texts will be easier to implement if you use
                    <span class="term">ForceAttack</span> or <span class="term">ForceMultiAttack</span> in the middle of text.
                    <br>(おそらくこれで全モンスターが死んでいる場合は戦闘が終了する...?[要検証])</li><br>
            </ul>
        </div>

        <div class="tab-pane text-style" id="mercy">
            <h2 style="text-decoration: none; line-height:50px;">
                * YOU WON!<br>
                * You earned 0 EXP and 0 gold.<br>
                * also the nav menu is broken now
            </h2><br>
        </div>
    </div>
</div>

<div class="container">
    <div class="col-xs-3"><img class="centerbt black" alt="Undertale fake button" src="../img/fightbt_0.png" height="42">
    </div>
    <div class="col-xs-3"><img class="centerbt black" alt="Undertale fake button" src="../img/actbt_0.png" height="42">
    </div>
    <div class="col-xs-3"><img class="centerbt black" alt="Undertale fake button" src="../img/itembt_0.png" height="42">
    </div>
    <div class="col-xs-3"><a href="#mercy" data-toggle="tab"><img class="centerbt black" alt="Undertale fake button"
                                                                  src="../img/mercybt_0.png" height="42"></a>
    </div>
</div>
<br>
<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="../js/bootstrap.min.js"></script>
<script type="text/javascript" src="../js/show_hide_comments.js"></script>

<script type="text/javascript" src="../js/FontToggleButton.js"></script>
</body>
</html>